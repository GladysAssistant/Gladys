<div class="box box-primary" data-ng-controller="ChartBoxCtrl as vm" ng-init="vm.init(<%= boxId %>);">
    <div class="box-header with-border" ng-cloak>
        <i class="fa fa-area-chart"></i>
        <h3 class="box-title">
            <span ng-show="vm.currentDeviceType === null">
                <%= __('box-chart-title') %></span>{{vm.currentDeviceType.roomName}}</h3>
        <div class="box-tools pull-right">
            <button type="button" id="previousButton" class="btn btn-box-tool" ng-click="vm.previousStates()">
                <i class="fa fa-arrow-left"></i>
            </button>
            <button type="button" id="nextButton" class="btn btn-box-tool" ng-click="vm.nextStates()">
                <i class="fa fa-arrow-right"></i>
            </button>
            <button id="chartMenu-<%= boxId %>" type="button" class="btn btn-box-tool dropdown-toggle" data-toggle="dropdown">
                <i class="fa fa-bars"></i>
            </button>
            <ul class="dropdown-menu" role="menu" style="max-height: 300px; overflow: auto">
                <li ng-repeat="deviceType in vm.deviceTypes | orderBy:['roomName', 'id']">
                    <a href="" ng-click="vm.currentDeviceType = deviceType" ng-show="deviceType.display">{{deviceType.roomName}}
                        : <span ng-if="deviceType.name">{{deviceType.name}}</span><span ng-if="!deviceType.name">{{deviceType.deviceName}}
                            - {{deviceType.type}}</span></a>
                </li>
            </ul>
        </div>
    </div>

    <!-- /.box-header -->
    <div class="box-body ng-cloak">
        <canvas id="deviceChart-<%= boxId %>"></canvas>
    </div>
    <!-- /.box-body -->
</div>
